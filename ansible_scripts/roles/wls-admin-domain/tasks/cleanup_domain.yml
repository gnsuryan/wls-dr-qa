---
- include_vars: vars.yaml
  tags: cleanupAdminDomain

- name: kill nodemanager process 
  shell: "systemctl stop wls_nodemanager.service || true"
  become: true
  tags: cleanupAdminDomain

- name: kill admin server process
  shell: "systemctl stop wls_admin.service || true"
  tags: cleanupAdminDomain

- name: kill any remaining weblogic process
  shell: "ps -ef|grep java|grep -v 'weblogic'|awk '{ print $2; }'|xargs kill -9 || true"
  become: true
  tags: cleanupAdminDomain

- name: cleanup script directory, if already present
  file:
    path: "{{ script_dir }}"
    state: absent
  become: true
  become_user: "{{ oracle_user }}"
  tags: cleanupAdminDomain

- name: cleanup domain directory, if already present
  file:
    path: "{{ domain_dir }}"
    state: absent
  become: true
  become_user: "{{ oracle_user }}"
  tags: cleanupAdminDomain


